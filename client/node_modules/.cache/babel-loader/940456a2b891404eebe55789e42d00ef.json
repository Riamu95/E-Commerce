{"ast":null,"code":"import { userActionTypes } from \"./UserAcionTypes\";\nimport { auth, provider, createUserProfileDocument } from \"../../firebase/firebase.utils\";\nimport { put, takeLatest, all, call } from 'redux-saga/effects';\nimport { GoogleSignInSuccess, GoogleSignInFail, EmailSignInSuccess, EmailSignInFail, UserSignOut as UserSignOutAction } from \"./user-actions\";\n\nfunction* onGoogleStartSignIn() {\n  const userAuth = yield auth.signInWithPopup(provider);\n\n  if (userAuth) {\n    try {\n      const userRef = yield createUserProfileDocument(userAuth.user, '');\n      const userSnapshot = yield userRef.get();\n      yield put(GoogleSignInSuccess({\n        id: userSnapshot.id,\n        ...userSnapshot.data()\n      }));\n    } catch (err) {\n      yield put(GoogleSignInFail({\n        error: err\n      }));\n    }\n  }\n}\n\n;\n\nfunction* GoogleStartSignIn() {\n  yield takeLatest(userActionTypes.GOOGLE_START_SIGNIN, onGoogleStartSignIn);\n}\n\n_c = GoogleStartSignIn;\n;\n\nfunction* onEmailStartSignIn(data) {\n  console.log('cluster');\n\n  try {\n    const userAuth = yield auth.signInWithEmailAndPassword(data.payload.email, data.payload.password);\n    const userRef = yield createUserProfileDocument(userAuth.user, '');\n    const snapshot = yield userRef.get();\n    console.log('hello');\n    yield put(EmailSignInSuccess({\n      id: snapshot.id,\n      ...snapshot.data()\n    }));\n  } catch (err) {\n    yield put(EmailSignInFail({\n      error: err\n    }));\n  }\n}\n\n;\n\nfunction* onUserSignOut() {\n  try {\n    yield auth.signOut();\n    yield put(UserSignOutAction());\n  } catch (err) {//yield put(EmailSignInFail({ error: err}));\n  }\n}\n\n;\n\nfunction* EmailStartSignIn() {\n  yield takeLatest(userActionTypes.EMAIL_START_SIGNIN, onEmailStartSignIn);\n}\n\n_c2 = EmailStartSignIn;\n;\n\nfunction* UserSignOut() {\n  yield takeLatest(userActionTypes.USER_SIGN_OUT, onUserSignOut);\n}\n\n_c3 = UserSignOut;\n;\nexport function* userSagas() {\n  yield all([call(GoogleStartSignIn), call(EmailStartSignIn), call(UserSignOut)]);\n}\n;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"GoogleStartSignIn\");\n$RefreshReg$(_c2, \"EmailStartSignIn\");\n$RefreshReg$(_c3, \"UserSignOut\");","map":{"version":3,"sources":["C:/Users/Predator/Documents/E-Commerce/src/Redux/User/User-Sagas.js"],"names":["userActionTypes","auth","provider","createUserProfileDocument","put","takeLatest","all","call","GoogleSignInSuccess","GoogleSignInFail","EmailSignInSuccess","EmailSignInFail","UserSignOut","UserSignOutAction","onGoogleStartSignIn","userAuth","signInWithPopup","userRef","user","userSnapshot","get","id","data","err","error","GoogleStartSignIn","GOOGLE_START_SIGNIN","onEmailStartSignIn","console","log","signInWithEmailAndPassword","payload","email","password","snapshot","onUserSignOut","signOut","EmailStartSignIn","EMAIL_START_SIGNIN","USER_SIGN_OUT","userSagas"],"mappings":"AAAA,SAASA,eAAT,QAAgC,kBAAhC;AACA,SAASC,IAAT,EAAeC,QAAf,EAAyBC,yBAAzB,QAA0D,+BAA1D;AACA,SAASC,GAAT,EAAcC,UAAd,EAA0BC,GAA1B,EAA+BC,IAA/B,QAA2C,oBAA3C;AACA,SAASC,mBAAT,EAA8BC,gBAA9B,EAAgDC,kBAAhD,EAAoEC,eAApE,EAAqFC,WAAW,IAAIC,iBAApG,QAA6H,gBAA7H;;AAEA,UAAUC,mBAAV,GACA;AACG,QAAMC,QAAQ,GAAG,MAAMd,IAAI,CAACe,eAAL,CAAqBd,QAArB,CAAvB;;AACC,MAAGa,QAAH,EACA;AACI,QAAI;AACA,YAAME,OAAO,GAAG,MAAMd,yBAAyB,CAACY,QAAQ,CAACG,IAAV,EAAgB,EAAhB,CAA/C;AACA,YAAMC,YAAY,GAAG,MAAMF,OAAO,CAACG,GAAR,EAA3B;AACA,YAAMhB,GAAG,CAACI,mBAAmB,CAAC;AAACa,QAAAA,EAAE,EAAGF,YAAY,CAACE,EAAnB;AAAuB,WAAGF,YAAY,CAACG,IAAb;AAA1B,OAAD,CAApB,CAAT;AACH,KAJD,CAIC,OAAMC,GAAN,EACD;AACI,YAAMnB,GAAG,CAACK,gBAAgB,CAAC;AAAEe,QAAAA,KAAK,EAAED;AAAT,OAAD,CAAjB,CAAT;AACH;AACJ;AACJ;;AAAA;;AAED,UAAUE,iBAAV,GACA;AACG,QAAMpB,UAAU,CAACL,eAAe,CAAC0B,mBAAjB,EAAsCZ,mBAAtC,CAAhB;AACF;;KAHSW,iB;AAGT;;AAED,UAAUE,kBAAV,CAA6BL,IAA7B,EACA;AACEM,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;;AACE,MAAI;AACA,UAAMd,QAAQ,GAAG,MAAMd,IAAI,CAAC6B,0BAAL,CAAgCR,IAAI,CAACS,OAAL,CAAaC,KAA7C,EAAmDV,IAAI,CAACS,OAAL,CAAaE,QAAhE,CAAvB;AACC,UAAMhB,OAAO,GAAG,MAAMd,yBAAyB,CAAEY,QAAQ,CAACG,IAAX,EAAiB,EAAjB,CAA/C;AACA,UAAMgB,QAAQ,GAAG,MAAMjB,OAAO,CAACG,GAAR,EAAvB;AACAQ,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACA,UAAMzB,GAAG,CAACM,kBAAkB,CAAC;AAAEW,MAAAA,EAAE,EAAGa,QAAQ,CAACb,EAAhB;AAAoB,SAAGa,QAAQ,CAACZ,IAAT;AAAvB,KAAD,CAAnB,CAAT;AACJ,GAND,CAOA,OAAQC,GAAR,EAAa;AACT,UAAMnB,GAAG,CAACO,eAAe,CAAC;AAAEa,MAAAA,KAAK,EAAED;AAAT,KAAD,CAAhB,CAAT;AACH;AAEJ;;AAAA;;AAED,UAAUY,aAAV,GACA;AACI,MAAI;AACA,UAAMlC,IAAI,CAACmC,OAAL,EAAN;AACA,UAAMhC,GAAG,CAACS,iBAAiB,EAAlB,CAAT;AACH,GAHD,CAIA,OAAQU,GAAR,EAAa,CACT;AACH;AAEJ;;AAAA;;AAED,UAAUc,gBAAV,GACA;AACG,QAAMhC,UAAU,CAACL,eAAe,CAACsC,kBAAjB,EAAqCX,kBAArC,CAAhB;AACF;;MAHSU,gB;AAGT;;AAED,UAAUzB,WAAV,GACA;AACG,QAAMP,UAAU,CAACL,eAAe,CAACuC,aAAjB,EAAgCJ,aAAhC,CAAhB;AACF;;MAHSvB,W;AAGT;AAED,OAAO,UAAU4B,SAAV,GACP;AACI,QAAMlC,GAAG,CAAC,CAACC,IAAI,CAACkB,iBAAD,CAAL,EAA0BlB,IAAI,CAAC8B,gBAAD,CAA9B,EAAkD9B,IAAI,CAACK,WAAD,CAAtD,CAAD,CAAT;AACH;AAAA","sourcesContent":["import { userActionTypes } from \"./UserAcionTypes\";\r\nimport { auth, provider, createUserProfileDocument } from \"../../firebase/firebase.utils\";\r\nimport { put, takeLatest, all ,call } from 'redux-saga/effects';\r\nimport { GoogleSignInSuccess, GoogleSignInFail, EmailSignInSuccess, EmailSignInFail, UserSignOut as UserSignOutAction } from \"./user-actions\";\r\n\r\nfunction* onGoogleStartSignIn()\r\n{\r\n   const userAuth = yield auth.signInWithPopup(provider);\r\n    if(userAuth)\r\n    {\r\n        try {\r\n            const userRef = yield createUserProfileDocument(userAuth.user, '');\r\n            const userSnapshot = yield userRef.get();\r\n            yield put(GoogleSignInSuccess({id : userSnapshot.id, ...userSnapshot.data()}));\r\n        }catch(err)\r\n        {\r\n            yield put(GoogleSignInFail({ error: err}));\r\n        }\r\n    }\r\n};\r\n\r\nfunction* GoogleStartSignIn()\r\n{\r\n   yield takeLatest(userActionTypes.GOOGLE_START_SIGNIN, onGoogleStartSignIn);\r\n};\r\n\r\nfunction* onEmailStartSignIn(data)\r\n{\r\n  console.log('cluster');\r\n    try {\r\n        const userAuth = yield auth.signInWithEmailAndPassword(data.payload.email,data.payload.password);\r\n         const userRef = yield createUserProfileDocument( userAuth.user, '');\r\n         const snapshot = yield userRef.get();\r\n         console.log('hello');\r\n         yield put(EmailSignInSuccess({ id : snapshot.id, ...snapshot.data() }));\r\n    }\r\n    catch ( err) {\r\n        yield put(EmailSignInFail({ error: err}));\r\n    }\r\n   \r\n};\r\n\r\nfunction* onUserSignOut()\r\n{\r\n    try {\r\n        yield auth.signOut();\r\n        yield put(UserSignOutAction());\r\n    }\r\n    catch ( err) {\r\n        //yield put(EmailSignInFail({ error: err}));\r\n    }\r\n   \r\n};\r\n\r\nfunction* EmailStartSignIn()\r\n{\r\n   yield takeLatest(userActionTypes.EMAIL_START_SIGNIN, onEmailStartSignIn);\r\n};\r\n\r\nfunction* UserSignOut()\r\n{\r\n   yield takeLatest(userActionTypes.USER_SIGN_OUT, onUserSignOut);\r\n};\r\n\r\nexport function* userSagas()\r\n{\r\n    yield all([call(GoogleStartSignIn), call(EmailStartSignIn), call(UserSignOut)]);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}